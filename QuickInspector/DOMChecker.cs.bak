using Microsoft.Playwright;

class DOMChecker
{
    static async Task Main()
    {
        Console.WriteLine("üîç Microfon & Bursverenler DOM Checker");
        Console.WriteLine("=======================================");
        
        var sites = new[]
        {
            new { Name = "Microfon", Url = "https://microfon.co/scholarship" },
            new { Name = "Bursverenler", Url = "https://bursverenler.org/?lang=tr" }
        };
        
        var playwright = await Playwright.CreateAsync();
        var browser = await playwright.Chromium.LaunchAsync(new BrowserTypeLaunchOptions
        {
            Headless = false, // G√∂rmek i√ßin
            SlowMo = 500
        });
        
        foreach (var site in sites)
        {
            try
            {
                Console.WriteLine($"\nüåê {site.Name} inceleniyor...");
                var page = await browser.NewPageAsync();
                
                await page.GotoAsync(site.Url, new PageGotoOptions 
                { 
                    WaitUntil = WaitUntilState.NetworkIdle,
                    Timeout = 60000 
                });
                
                // Screenshot al
                await page.ScreenshotAsync(new PageScreenshotOptions 
                { 
                    Path = $"{site.Name.ToLower()}_dom_check.png",
                    FullPage = true 
                });
                
                // HTML'i kaydet
                var html = await page.ContentAsync();
                await File.WriteAllTextAsync($"{site.Name.ToLower()}_dom.html", html);
                
                Console.WriteLine($"   ‚úÖ {site.Name} DOM'u kaydedildi");
                Console.WriteLine($"   üìÑ {site.Name.ToLower()}_dom.html");
                Console.WriteLine($"   üì∑ {site.Name.ToLower()}_dom_check.png");
                
                await page.CloseAsync();
                
                Console.WriteLine("Devam etmek i√ßin Enter...");
                Console.ReadLine();
            }
            catch (Exception ex)
            {
                Console.WriteLine($"   ‚ùå {site.Name} hatasƒ±: {ex.Message}");
            }
        }
        
        await browser.CloseAsync();
        playwright.Dispose();
        
        Console.WriteLine("\nüéØ DOM kontrol tamamlandƒ±!");
        Console.WriteLine("≈ûimdi HTML dosyalarƒ±nƒ± a√ßƒ±p doƒüru selector'larƒ± bulabiliriz.");
    }
}
