<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:ListingMonitor.UI.ViewModels"
        mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="650"
        x:Class="ListingMonitor.UI.Views.SmtpSettingsWindow"
        x:DataType="vm:SmtpSettingsViewModel"
        Title="SMTP AyarlarÄ±"
        Width="600" Height="650"
        WindowStartupLocation="CenterOwner">

  <Design.DataContext>
    <vm:SmtpSettingsViewModel/>
  </Design.DataContext>

  <Grid RowDefinitions="Auto,*,Auto,Auto">
    <!-- Header -->
    <Border Grid.Row="0" Background="#2C3E50" Padding="20">
      <StackPanel Orientation="Horizontal" Spacing="10">
        <TextBlock Text="ðŸ“§" FontSize="20" VerticalAlignment="Center"/>
        <TextBlock Text="SMTP E-posta AyarlarÄ±" 
                   FontSize="18" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
      </StackPanel>
    </Border>

    <!-- Content -->
    <ScrollViewer Grid.Row="1" Padding="20">
      <StackPanel Spacing="15">
        
        <!-- Quick Presets -->
        <Border Background="#FFF3E0" CornerRadius="8" Padding="15" BoxShadow="0 2 8 #20000000">
          <StackPanel Spacing="10">
            <TextBlock Text="âš¡ HÄ±zlÄ± Ayarlar" FontSize="14" FontWeight="Bold" Foreground="#E65100"/>
            <TextBlock Text="Email saÄŸlayÄ±cÄ±nÄ±z iÃ§in hÄ±zlÄ± ayarlar:" FontSize="12" Foreground="#666"/>
            <StackPanel Orientation="Horizontal" Spacing="10">
              <Button Content="ðŸ“¬ Gmail" Command="{Binding LoadGmailDefaultsCommand}"
                      Background="#EA4335" Foreground="White" Padding="12,6"/>
              <Button Content="ðŸ“­ Outlook" Command="{Binding LoadOutlookDefaultsCommand}"
                      Background="#0078D4" Foreground="White" Padding="12,6"/>
              <Button Content="ðŸ“ª Yahoo" Command="{Binding LoadYahooDefaultsCommand}"
                      Background="#720E9E" Foreground="White" Padding="12,6"/>
            </StackPanel>
          </StackPanel>
        </Border>

        <!-- SMTP Settings -->
        <Border Background="White" CornerRadius="8" Padding="15" BoxShadow="0 2 8 #20000000">
          <StackPanel Spacing="10">
            <TextBlock Text="ðŸ”Œ SMTP Sunucu AyarlarÄ±" FontSize="14" FontWeight="Bold" Foreground="#2C3E50"/>
            
            <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto">
              <TextBlock Grid.Column="0" Grid.Row="0" Text="SMTP Host:" VerticalAlignment="Center" Margin="0,0,10,0"/>
              <TextBox Grid.Column="1" Grid.Row="0" Text="{Binding SmtpHost}" Watermark="smtp.gmail.com"/>
              
              <TextBlock Grid.Column="0" Grid.Row="1" Text="SMTP Port:" VerticalAlignment="Center" Margin="0,10,10,0"/>
              <NumericUpDown Grid.Column="1" Grid.Row="1" Value="{Binding SmtpPort}" Minimum="1" Maximum="65535" 
                             FormatString="N0" Margin="0,10,0,0"/>
              
              <CheckBox Grid.Column="1" Grid.Row="2" Content="Use StartTLS" IsChecked="{Binding UseStartTls}" Margin="0,10,0,0"/>
            </Grid>
          </StackPanel>
        </Border>

        <!-- Authentication -->
        <Border Background="White" CornerRadius="8" Padding="15" BoxShadow="0 2 8 #20000000">
          <StackPanel Spacing="10">
            <TextBlock Text="ðŸ” Kimlik DoÄŸrulama" FontSize="14" FontWeight="Bold" Foreground="#2C3E50"/>
            
            <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto">
              <TextBlock Grid.Column="0" Grid.Row="0" Text="KullanÄ±cÄ± AdÄ±:" VerticalAlignment="Center" Margin="0,0,10,0"/>
              <TextBox Grid.Column="1" Grid.Row="0" Text="{Binding SmtpUsername}" Watermark="email@example.com"/>
              
              <TextBlock Grid.Column="0" Grid.Row="1" Text="Åžifre/App Password:" VerticalAlignment="Center" Margin="0,10,10,0"/>
              <TextBox Grid.Column="1" Grid.Row="1" Text="{Binding SmtpPassword}" 
                       PasswordChar="*" Watermark="Gmail iÃ§in App Password kullanÄ±n" Margin="0,10,0,0"/>
            </Grid>
            
            <Border Background="#FFF9C4" CornerRadius="5" Padding="10" Margin="0,10,0,0">
              <StackPanel Spacing="5">
                <TextBlock Text="âš ï¸ Ã–nemli Not:" FontWeight="Bold" Foreground="#F57C00"/>
                <TextBlock Text="Gmail/Yahoo iÃ§in normal ÅŸifre yerine App Password kullanmalÄ±sÄ±nÄ±z:" 
                           FontSize="12" TextWrapping="Wrap" Foreground="#666"/>
                <TextBlock Text="â€¢ Google Account â†’ Security â†’ 2-Step Verification â†’ App Passwords" 
                           FontSize="11" TextWrapping="Wrap" Foreground="#666"/>
              </StackPanel>
            </Border>
          </StackPanel>
        </Border>

        <!-- Email Settings -->
        <Border Background="White" CornerRadius="8" Padding="15" BoxShadow="0 2 8 #20000000">
          <StackPanel Spacing="10">
            <TextBlock Text="ðŸ“¨ GÃ¶nderici Bilgileri" FontSize="14" FontWeight="Bold" Foreground="#2C3E50"/>
            
            <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto">
              <TextBlock Grid.Column="0" Grid.Row="0" Text="GÃ¶nderici Email:" VerticalAlignment="Center" Margin="0,0,10,0"/>
              <TextBox Grid.Column="1" Grid.Row="0" Text="{Binding FromEmail}" Watermark="gonderici@example.com"/>
              
              <TextBlock Grid.Column="0" Grid.Row="1" Text="GÃ¶nderici AdÄ±:" VerticalAlignment="Center" Margin="0,10,10,0"/>
              <TextBox Grid.Column="1" Grid.Row="1" Text="{Binding FromName}" Watermark="Ä°lan Takip" Margin="0,10,0,0"/>
            </Grid>
          </StackPanel>
        </Border>

        <!-- Other Settings -->
        <Border Background="White" CornerRadius="8" Padding="15" BoxShadow="0 2 8 #20000000">
          <StackPanel Spacing="10">
            <TextBlock Text="â° DiÄŸer Ayarlar" FontSize="14" FontWeight="Bold" Foreground="#2C3E50"/>
            
            <Grid ColumnDefinitions="Auto,*">
              <TextBlock Grid.Column="0" Text="Kontrol AralÄ±ÄŸÄ± (dakika):" VerticalAlignment="Center" Margin="0,0,10,0"/>
              <NumericUpDown Grid.Column="1" Value="{Binding CheckIntervalMinutes}" Minimum="1" Maximum="1440" 
                             FormatString="N0" Watermark="Otomatik kontrol aralÄ±ÄŸÄ±"/>
            </Grid>
          </StackPanel>
        </Border>

      </StackPanel>
    </ScrollViewer>

    <!-- Message -->
    <Border Grid.Row="2" Background="#E8F5E8" Padding="15" Margin="20,0,20,10" CornerRadius="5"
            IsVisible="{Binding Message, Converter={x:Static ObjectConverters.IsNotNull}}">
      <TextBlock Text="{Binding Message}" Foreground="#2E7D32" TextWrapping="Wrap"/>
    </Border>

    <!-- Buttons -->
    <Border Grid.Row="3" Background="#F8F9FA" Padding="20,15">
      <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="10">
        <Button Content="ðŸ§ª Test Email" Command="{Binding TestEmailCommand}"
                Background="#FF9800" Foreground="White" Padding="15,8"
                IsEnabled="{Binding !IsTestInProgress}"/>
        <Button Content="Ä°ptal" Command="{Binding CancelCommand}"
                Background="#9E9E9E" Foreground="White" Padding="15,8"/>
        <Button Content="ðŸ’¾ Kaydet" Command="{Binding SaveCommand}"
                Background="#4CAF50" Foreground="White" Padding="15,8"/>
      </StackPanel>
    </Border>

  </Grid>

</Window>
